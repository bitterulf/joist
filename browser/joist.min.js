/*! joist version 0.5.1 by Sebastian Kannegiesser <s_schlender@hotmail.com> 2014-10-06 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Joist=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("underscore"),d=function(a){a.output=this,this.dep=a};d.prototype.render=function(a){var b=this;c.each(a.displayText,function(a){b.displayText(a.target,a.text)})},d.prototype.displayText=function(a,b){console.log(a+"> "+b)},d.prototype.displayActionList=function(a,b){console.log(a+"> "),c.each(b,function(a){var b=a.label+" [ ";c.each(a,function(a,c){"label"!=c&&(b+=c+'="'+a+'" ')}),b+="]",console.log(b)})},d.prototype.displayList=function(a,b){console.log(a+"> "),c.each(b,function(a){var b="[ ";c.each(a,function(a,c){b+=c+'="'+a+'" '}),b+="]",console.log(b)})},b.exports=d},{underscore:12}],2:[function(a,b){var c=a("underscore"),d=function(a,b,d){for(var e=b.split("."),f=e.length,g=0;f>g;g++)g==f-1?a[e[g]]=d:(c.has(a,e[g])||(a[e[g]]={}),a=a[e[g]])},e=function(a,b){for(var d=b.split("."),e=d.length,f=0;e>f;f++)if(f==e-1)delete a[d[f]];else{if(!c.has(a,d[f]))break;a=a[d[f]]}},f=function(a){a.dep.dataManager=this,this.dep=a.dep,this.data={}};f.prototype.patch=function(a,b){return arguments.length>1?d(this.data,a,b):e(this.data,a),this.data},f.prototype.getData=function(){return this.data},b.exports=f},{underscore:12}],3:[function(a,b){var c=a("underscore"),d=function(a){a.output=this,this.dep=a};d.prototype.render=function(a){var b=this;c.each(a.displayText,function(a){b.displayText(a.target,a.text)})},d.prototype.displayText=function(a,b){var c=document.getElementById("joist-box-"+a);c||(c=document.createElement("div"),c.id="joist-box-"+a,document.body.appendChild(c)),c.innerHTML=b},d.prototype.displayActionList=function(a,b){var d=document.getElementById("joist-box-"+a);d||(d=document.createElement("div"),d.id="joist-box-"+a,document.body.appendChild(d));var e="";c.each(b,function(a){e+="<div ",c.each(a,function(a,b){"label"!=b&&(e+="data-joist-"+b+'="'+a+'" ')}),e+=">"+a.label+"<div>"}),d.innerHTML=e},d.prototype.displayList=function(a,b){var d=document.getElementById("joist-box-"+a);d||(d=document.createElement("div"),d.id="joist-box-"+a,document.body.appendChild(d));var e="";c.each(b,function(a){e+="<div>"+a.label+": ",c.each(a,function(a,b){e+=b+"="+a+" "}),e+="<div>"}),d.innerHTML=e},b.exports=d},{underscore:12}],4:[function(a,b){var c=a("underscore");c.s=a("underscore.string");var d=function(a){var b=this;this.joist=a,document.onclick=function(a){b.input(a)}};d.prototype.input=function(a){if(a.target){var b=a.target.getAttribute("data-joist-target"),d={};if(c.each(a.target.attributes,function(a){c.s.startsWith(a.name,"data-joist-")&&("data-joist-target"==a.name?b=a.value:d[a.name.replace("data-joist-","")]=a.value)}),b){console.log(b,d);var e={device:{type:"mouse",id:0},timestamp:Date.now(),target:b,data:d};this.joist.actionUpdate(e)}}},b.exports=d},{underscore:12,"underscore.string":11}],5:[function(a,b,c){c.version=a("../package.json").version,c.Logic=a("./logic"),c.ReplSignal=a("./replSignal"),c.HtmlSignal=a("./htmlSignal"),c.ConsoleOutput=a("./consoleOutput"),c.HtmlOutput=a("./htmlOutput"),c.DataManager=a("./dataManager"),c.create=function(b,c){return new(a("./joist"))(b,c)}},{"../package.json":13,"./consoleOutput":1,"./dataManager":2,"./htmlOutput":3,"./htmlSignal":4,"./joist":6,"./logic":7,"./replSignal":8}],6:[function(a,b){var c=a("deep-diff").diff,d=a("underscore"),e=function(a,b){a.joist=this,this.data=b,this.dep=a,this.actions=[],this.reactions=[],this.routes=[],this._=d,this.renderTargets=[]};e.prototype.patch=function(a,b){var c=d.extend({},this.dep.dataManager.getData());this.reactionUpdate(c,this.dep.dataManager.patch(a,b))},e.prototype.addSignalSource=function(a){return new a(this),this},e.prototype.addRenderTarget=function(a){return this.renderTargets.push(new a(this)),this},e.prototype.addDataManager=function(a){return new a(this),this},e.prototype.addAction=function(a){return this.actions.push(a),this},e.prototype.addRoute=function(a){return this.routes.push(a),this},e.prototype.addReaction=function(a){return this.reactions.push(a),this},e.prototype.actionUpdate=function(a){var b=this.dep,c=[];d.each(this.actions,function(d){d.check(a,c)&&(d.command(b,a,c),c.push(d.name))})},e.prototype.routeUpdate=function(a){var b=this.dep,c=[];d.each(this.routes,function(d){d.check(a,c)&&(d.command(b,a,c),c.push(d.name))})},e.prototype.reactionUpdate=function(a,b){var e=this.dep,f=c(a,b),g=[],h={};d.each(this.reactions,function(a){a.check(f,g)&&(a.command(e,f,g,h),g.push(a.name))}),d.each(this.renderTargets,function(a){a.render(h)})},b.exports=e},{"deep-diff":9,underscore:12}],7:[function(a,b){var c=function(a){this.name=a.name,this.check=a.check,this.command=a.command};b.exports=c},{}],8:[function(a,b){var c=a("underscore");c.s=a("underscore.string");var d=a("repl"),e=function(a){var b=this;this.joist=a;d.start({prompt:"app > ",eval:function(){b.input.apply(b,arguments)}})};e.prototype.input=function(a,b,c,d){a=a.slice(0,a.length-2).slice(1,a.length),this.send(a),d(null,"")},e.prototype.send=function(a){var b=a.split(" "),d={},e=b.shift();c.each(b,function(a){if(a.indexOf("=")>-1){var b=a.split("=");2==b.length&&(d[b[0]]=b[1])}});var f={device:{type:"keyboard",id:0},timestamp:Date.now(),target:e,data:d};this.joist.actionUpdate(f)},b.exports=e},{repl:10,underscore:12,"underscore.string":11}],9:[function(a,b,c){(function(a){!function(d){"use strict";function e(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}function f(a,b){Object.defineProperty(this,"kind",{value:a,enumerable:!0}),b&&b.length&&Object.defineProperty(this,"path",{value:b,enumerable:!0})}function g(a,b,c){g.super_.call(this,"E",a),Object.defineProperty(this,"lhs",{value:b,enumerable:!0}),Object.defineProperty(this,"rhs",{value:c,enumerable:!0})}function h(a,b){h.super_.call(this,"N",a),Object.defineProperty(this,"rhs",{value:b,enumerable:!0})}function i(a,b){i.super_.call(this,"D",a),Object.defineProperty(this,"lhs",{value:b,enumerable:!0})}function j(a,b,c){j.super_.call(this,"A",a),Object.defineProperty(this,"index",{value:b,enumerable:!0}),Object.defineProperty(this,"item",{value:c,enumerable:!0})}function k(a,b,c){var d=a.slice((c||b)+1||a.length);return a.length=0>b?a.length+b:b,a.push.apply(a,d),a}function l(a,b,c,e,f,m,n){f=f||[];var o=f.slice(0);if("undefined"!=typeof m){if(e&&e(o,m))return;o.push(m)}var p=typeof a,q=typeof b;if("undefined"===p)"undefined"!==q&&c(new h(o,b));else if("undefined"===q)c(new i(o,a));else if(p!==q)c(new g(o,a,b));else if(a instanceof Date&&b instanceof Date&&a-b!==0)c(new g(o,a,b));else if("object"===p&&null!==a&&null!==b){if(n=n||[],n.indexOf(a)<0){if(n.push(a),Array.isArray(a)){{var r;a.length}for(r=0;r<a.length;r++)r>=b.length?c(new j(o,r,new i(d,a[r]))):l(a[r],b[r],c,e,o,r,n);for(;r<b.length;)c(new j(o,r,new h(d,b[r++])))}else{var s=Object.keys(a),t=Object.keys(b);s.forEach(function(f){var g=t.indexOf(f);g>=0?(l(a[f],b[f],c,e,o,f,n),t=k(t,g)):l(a[f],d,c,e,o,f,n)}),t.forEach(function(a){l(d,b[a],c,e,o,a,n)})}n.length=n.length-1}}else a!==b&&("number"===p&&isNaN(a)&&isNaN(b)||c(new g(o,a,b)))}function m(a,b,c,e){return e=e||[],l(a,b,function(a){a&&e.push(a)},c),e.length?e:d}function n(a,b,c){if(c.path&&c.path.length){var d,e=a[b],f=c.path.length-1;for(d=0;f>d;d++)e=e[c.path[d]];switch(c.kind){case"A":n(e[c.path[d]],c.index,c.item);break;case"D":delete e[c.path[d]];break;case"E":case"N":e[c.path[d]]=c.rhs}}else switch(c.kind){case"A":n(a[b],c.index,c.item);break;case"D":a=k(a,b);break;case"E":case"N":a[b]=c.rhs}return a}function o(a,b,c){if(a&&b&&c&&c.kind){for(var d=a,e=-1,f=c.path.length-1;++e<f;)"undefined"==typeof d[c.path[e]]&&(d[c.path[e]]="number"==typeof c.path[e]?new Array:{}),d=d[c.path[e]];switch(c.kind){case"A":n(d[c.path[e]],c.index,c.item);break;case"D":delete d[c.path[e]];break;case"E":case"N":d[c.path[e]]=c.rhs}}}function p(a,b,c){if(c.path&&c.path.length){var d,e=a[b],f=c.path.length-1;for(d=0;f>d;d++)e=e[c.path[d]];switch(c.kind){case"A":p(e[c.path[d]],c.index,c.item);break;case"D":e[c.path[d]]=c.lhs;break;case"E":e[c.path[d]]=c.lhs;break;case"N":delete e[c.path[d]]}}else switch(c.kind){case"A":p(a[b],c.index,c.item);break;case"D":a[b]=c.lhs;break;case"E":a[b]=c.lhs;break;case"N":a=k(a,b)}return a}function q(a,b,c){if(a&&b&&c&&c.kind){var d,e,f=a;for(e=c.path.length-1,d=0;e>d;d++)"undefined"==typeof f[c.path[d]]&&(f[c.path[d]]={}),f=f[c.path[d]];switch(c.kind){case"A":p(f[c.path[d]],c.index,c.item);break;case"D":f[c.path[d]]=c.lhs;break;case"E":f[c.path[d]]=c.lhs;break;case"N":delete f[c.path[d]]}}}function r(a,b,c){if(a&&b){var d=function(d){(!c||c(a,b,d))&&o(a,b,d)};l(a,b,d)}}var s,t,u=[];s="object"==typeof a&&a?a:"undefined"!=typeof window?window:{},t=s.DeepDiff,t&&u.push(function(){"undefined"!=typeof t&&s.DeepDiff===m&&(s.DeepDiff=t,t=d)}),e(g,f),e(h,f),e(i,f),e(j,f),Object.defineProperties(m,{diff:{value:m,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:r,enumerable:!0},applyChange:{value:o,enumerable:!0},revertChange:{value:q,enumerable:!0},isConflict:{get:function(){return"undefined"!=typeof t},enumerable:!0},noConflict:{value:function(){return u&&(u.forEach(function(a){a()}),u=null),m},enumerable:!0}}),"undefined"!=typeof b&&b&&"object"==typeof c&&c&&b.exports===c?b.exports=m:s.DeepDiff=m}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(){},{}],11:[function(b,c,d){!function(b,e){"use strict";function f(a,b){var c,d,e=a.toLowerCase();for(b=[].concat(b),c=0;c<b.length;c+=1)if(d=b[c]){if(d.test&&d.test(a))return!0;if(d.toLowerCase()===e)return!0}}var g=e.prototype.trim,h=e.prototype.trimRight,i=e.prototype.trimLeft,j=function(a){return 1*a||0},k=function(a,b){if(1>b)return"";for(var c="";b>0;)1&b&&(c+=a),b>>=1,a+=a;return c},l=[].slice,m=function(a){return null==a?"\\s":a.source?a.source:"["+r.escapeRegExp(a)+"]"},n={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},o={};for(var p in n)o[n[p]]=p;o["'"]="#39";var q=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=k,c=function(){return c.cache.hasOwnProperty(arguments[0])||(c.cache[arguments[0]]=c.parse(arguments[0])),c.format.call(null,c.cache[arguments[0]],arguments)};return c.format=function(c,d){var f,g,h,i,j,k,l,m=1,n=c.length,o="",p=[];for(g=0;n>g;g++)if(o=a(c[g]),"string"===o)p.push(c[g]);else if("array"===o){if(i=c[g],i[2])for(f=d[m],h=0;h<i[2].length;h++){if(!f.hasOwnProperty(i[2][h]))throw new Error(q('[_.sprintf] property "%s" does not exist',i[2][h]));f=f[i[2][h]]}else f=i[1]?d[i[1]]:d[m++];if(/[^s]/.test(i[8])&&"number"!=a(f))throw new Error(q("[_.sprintf] expecting number but found %s",a(f)));switch(i[8]){case"b":f=f.toString(2);break;case"c":f=e.fromCharCode(f);break;case"d":f=parseInt(f,10);break;case"e":f=i[7]?f.toExponential(i[7]):f.toExponential();break;case"f":f=i[7]?parseFloat(f).toFixed(i[7]):parseFloat(f);break;case"o":f=f.toString(8);break;case"s":f=(f=e(f))&&i[7]?f.substring(0,i[7]):f;break;case"u":f=Math.abs(f);break;case"x":f=f.toString(16);break;case"X":f=f.toString(16).toUpperCase()}f=/[def]/.test(i[8])&&i[3]&&f>=0?"+"+f:f,k=i[4]?"0"==i[4]?"0":i[4].charAt(1):" ",l=i[6]-e(f).length,j=i[6]?b(k,l):"",p.push(i[5]?f+j:j+f)}return p.join("")},c.cache={},c.parse=function(a){for(var b=a,c=[],d=[],e=0;b;){if(null!==(c=/^[^\x25]+/.exec(b)))d.push(c[0]);else if(null!==(c=/^\x25{2}/.exec(b)))d.push("%");else{if(null===(c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw new Error("[_.sprintf] huh?");if(c[2]){e|=1;var f=[],g=c[2],h=[];if(null===(h=/^([a-z_][a-z_\d]*)/i.exec(g)))throw new Error("[_.sprintf] huh?");for(f.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=/^\.([a-z_][a-z_\d]*)/i.exec(g)))f.push(h[1]);else{if(null===(h=/^\[(\d+)\]/.exec(g)))throw new Error("[_.sprintf] huh?");f.push(h[1])}c[2]=f}else e|=2;if(3===e)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");d.push(c)}b=b.substring(c[0].length)}return d},c}(),r={VERSION:"2.3.0",isBlank:function(a){return null==a&&(a=""),/^\s*$/.test(a)},stripTags:function(a){return null==a?"":e(a).replace(/<\/?[^>]+>/g,"")},capitalize:function(a){return a=null==a?"":e(a),a.charAt(0).toUpperCase()+a.slice(1)},chop:function(a,b){return null==a?[]:(a=e(a),b=~~b,b>0?a.match(new RegExp(".{1,"+b+"}","g")):[a])},clean:function(a){return r.strip(a).replace(/\s+/g," ")},count:function(a,b){if(null==a||null==b)return 0;a=e(a),b=e(b);for(var c=0,d=0,f=b.length;;){if(d=a.indexOf(b,d),-1===d)break;c++,d+=f}return c},chars:function(a){return null==a?[]:e(a).split("")},swapCase:function(a){return null==a?"":e(a).replace(/\S/g,function(a){return a===a.toUpperCase()?a.toLowerCase():a.toUpperCase()})},escapeHTML:function(a){return null==a?"":e(a).replace(/[&<>"']/g,function(a){return"&"+o[a]+";"})},unescapeHTML:function(a){return null==a?"":e(a).replace(/\&([^;]+);/g,function(a,b){var c;return b in n?n[b]:(c=b.match(/^#x([\da-fA-F]+)$/))?e.fromCharCode(parseInt(c[1],16)):(c=b.match(/^#(\d+)$/))?e.fromCharCode(~~c[1]):a})},escapeRegExp:function(a){return null==a?"":e(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(a,b,c,d){var e=r.chars(a);return e.splice(~~b,~~c,d),e.join("")},insert:function(a,b,c){return r.splice(a,b,0,c)},include:function(a,b){return""===b?!0:null==a?!1:-1!==e(a).indexOf(b)},join:function(){var a=l.call(arguments),b=a.shift();return null==b&&(b=""),a.join(b)},lines:function(a){return null==a?[]:e(a).split("\n")},reverse:function(a){return r.chars(a).reverse().join("")},startsWith:function(a,b){return""===b?!0:null==a||null==b?!1:(a=e(a),b=e(b),a.length>=b.length&&a.slice(0,b.length)===b)},endsWith:function(a,b){return""===b?!0:null==a||null==b?!1:(a=e(a),b=e(b),a.length>=b.length&&a.slice(a.length-b.length)===b)},succ:function(a){return null==a?"":(a=e(a),a.slice(0,-1)+e.fromCharCode(a.charCodeAt(a.length-1)+1))},titleize:function(a){return null==a?"":(a=e(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},camelize:function(a){return r.trim(a).replace(/[-_\s]+(.)?/g,function(a,b){return b?b.toUpperCase():""})},underscored:function(a){return r.trim(a).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(a){return r.trim(a).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(a){return r.titleize(e(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(a){return r.capitalize(r.underscored(a).replace(/_id$/,"").replace(/_/g," "))},trim:function(a,b){return null==a?"":!b&&g?g.call(a):(b=m(b),e(a).replace(new RegExp("^"+b+"+|"+b+"+$","g"),""))},ltrim:function(a,b){return null==a?"":!b&&i?i.call(a):(b=m(b),e(a).replace(new RegExp("^"+b+"+"),""))},rtrim:function(a,b){return null==a?"":!b&&h?h.call(a):(b=m(b),e(a).replace(new RegExp(b+"+$"),""))},truncate:function(a,b,c){return null==a?"":(a=e(a),c=c||"...",b=~~b,a.length>b?a.slice(0,b)+c:a)},prune:function(a,b,c){if(null==a)return"";if(a=e(a),b=~~b,c=null!=c?e(c):"...",a.length<=b)return a;var d=function(a){return a.toUpperCase()!==a.toLowerCase()?"A":" "},f=a.slice(0,b+1).replace(/.(?=\W*\w*$)/g,d);return f=f.slice(f.length-2).match(/\w\w/)?f.replace(/\s*\S+$/,""):r.rtrim(f.slice(0,f.length-1)),(f+c).length>a.length?a:a.slice(0,f.length)+c},words:function(a,b){return r.isBlank(a)?[]:r.trim(a,b).split(b||/\s+/)},pad:function(a,b,c,d){a=null==a?"":e(a),b=~~b;var f=0;switch(c?c.length>1&&(c=c.charAt(0)):c=" ",d){case"right":return f=b-a.length,a+k(c,f);case"both":return f=b-a.length,k(c,Math.ceil(f/2))+a+k(c,Math.floor(f/2));default:return f=b-a.length,k(c,f)+a}},lpad:function(a,b,c){return r.pad(a,b,c)},rpad:function(a,b,c){return r.pad(a,b,c,"right")},lrpad:function(a,b,c){return r.pad(a,b,c,"both")},sprintf:q,vsprintf:function(a,b){return b.unshift(a),q.apply(null,b)},toNumber:function(a,b){return a?(a=r.trim(a),a.match(/^-?\d+(?:\.\d+)?$/)?j(j(a).toFixed(~~b)):0/0):0},numberFormat:function(a,b,c,d){if(isNaN(a)||null==a)return"";a=a.toFixed(~~b),d="string"==typeof d?d:",";var e=a.split("."),f=e[0],g=e[1]?(c||".")+e[1]:"";return f.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+d)+g},strRight:function(a,b){if(null==a)return"";a=e(a),b=null!=b?e(b):b;var c=b?a.indexOf(b):-1;return~c?a.slice(c+b.length,a.length):a},strRightBack:function(a,b){if(null==a)return"";a=e(a),b=null!=b?e(b):b;var c=b?a.lastIndexOf(b):-1;return~c?a.slice(c+b.length,a.length):a},strLeft:function(a,b){if(null==a)return"";a=e(a),b=null!=b?e(b):b;var c=b?a.indexOf(b):-1;return~c?a.slice(0,c):a},strLeftBack:function(a,b){if(null==a)return"";a+="",b=null!=b?""+b:b;var c=a.lastIndexOf(b);return~c?a.slice(0,c):a},toSentence:function(a,b,c,d){b=b||", ",c=c||" and ";var e=a.slice(),f=e.pop();return a.length>2&&d&&(c=r.rtrim(b)+c),e.length?e.join(b)+c+f:f},toSentenceSerial:function(){var a=l.call(arguments);return a[3]=!0,r.toSentence.apply(r,a)},slugify:function(a){if(null==a)return"";var b="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",c="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",d=new RegExp(m(b),"g");return a=e(a).toLowerCase().replace(d,function(a){var d=b.indexOf(a);return c.charAt(d)||"-"}),r.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,b){return[b,a,b].join("")},quote:function(a,b){return r.surround(a,b||'"')},unquote:function(a,b){return b=b||'"',a[0]===b&&a[a.length-1]===b?a.slice(1,a.length-1):a},exports:function(){var a={};for(var b in this)this.hasOwnProperty(b)&&!b.match(/^(?:include|contains|reverse)$/)&&(a[b]=this[b]);return a},repeat:function(a,b,c){if(null==a)return"";if(b=~~b,null==c)return k(e(a),b);for(var d=[];b>0;d[--b]=a);return d.join(c)},naturalCmp:function(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=/(\.\d+)|(\d+)|(\D+)/g,d=e(a).toLowerCase().match(c),f=e(b).toLowerCase().match(c),g=Math.min(d.length,f.length),h=0;g>h;h++){var i=d[h],j=f[h];if(i!==j){var k=parseInt(i,10);if(!isNaN(k)){var l=parseInt(j,10);if(!isNaN(l)&&k-l)return k-l}return j>i?-1:1}}return d.length===f.length?d.length-f.length:b>a?-1:1},levenshtein:function(a,b){if(null==a&&null==b)return 0;if(null==a)return e(b).length;if(null==b)return e(a).length;a=e(a),b=e(b);for(var c,d,f=[],g=0;g<=b.length;g++)for(var h=0;h<=a.length;h++)d=g&&h?a.charAt(h-1)===b.charAt(g-1)?c:Math.min(f[h],f[h-1],c)+1:g+h,c=f[h],f[h]=d;return f.pop()},toBoolean:function(a,b,c){return"number"==typeof a&&(a=""+a),"string"!=typeof a?!!a:(a=r.trim(a),f(a,b||["true","1"])?!0:f(a,c||["false","0"])?!1:void 0)}};r.strip=r.trim,r.lstrip=r.ltrim,r.rstrip=r.rtrim,r.center=r.lrpad,r.rjust=r.lpad,r.ljust=r.rpad,r.contains=r.include,r.q=r.quote,r.toBool=r.toBoolean,"undefined"!=typeof d&&("undefined"!=typeof c&&c.exports&&(c.exports=r),d._s=r),"function"==typeof a&&a.amd&&a("underscore.string",[],function(){return r}),b._=b._||{},b._.string=b._.str=r}(this,String)},{}],12:[function(b,c,d){(function(){var b=this,e=b._,f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=Array.isArray,o=Object.keys,p=h.bind,q=function(a){return a instanceof q?a:this instanceof q?void(this._wrapped=a):new q(a)};"undefined"!=typeof d?("undefined"!=typeof c&&c.exports&&(d=c.exports=q),d._=q):b._=q,q.VERSION="1.7.0";var r=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};q.iteratee=function(a,b,c){return null==a?q.identity:q.isFunction(a)?r(a,b,c):q.isObject(a)?q.matches(a):q.property(a)},q.each=q.forEach=function(a,b,c){if(null==a)return a;b=r(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=q.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},q.map=q.collect=function(a,b,c){if(null==a)return[];b=q.iteratee(b,c);for(var d,e=a.length!==+a.length&&q.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var s="Reduce of empty array with no initial value";q.reduce=q.foldl=q.inject=function(a,b,c,d){null==a&&(a=[]),b=r(b,d,4);var e,f=a.length!==+a.length&&q.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(s);c=a[f?f[h++]:h++]}for(;g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},q.reduceRight=q.foldr=function(a,b,c,d){null==a&&(a=[]),b=r(b,d,4);var e,f=a.length!==+a.length&&q.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(s);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},q.find=q.detect=function(a,b,c){var d;return b=q.iteratee(b,c),q.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},q.filter=q.select=function(a,b,c){var d=[];return null==a?d:(b=q.iteratee(b,c),q.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},q.reject=function(a,b,c){return q.filter(a,q.negate(q.iteratee(b)),c)},q.every=q.all=function(a,b,c){if(null==a)return!0;b=q.iteratee(b,c);var d,e,f=a.length!==+a.length&&q.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},q.some=q.any=function(a,b,c){if(null==a)return!1;b=q.iteratee(b,c);var d,e,f=a.length!==+a.length&&q.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},q.contains=q.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=q.values(a)),q.indexOf(a,b)>=0)},q.invoke=function(a,b){var c=j.call(arguments,2),d=q.isFunction(b);return q.map(a,function(a){return(d?b:a[b]).apply(a,c)})},q.pluck=function(a,b){return q.map(a,q.property(b))},q.where=function(a,b){return q.filter(a,q.matches(b))},q.findWhere=function(a,b){return q.find(a,q.matches(b))},q.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:q.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=q.iteratee(b,c),q.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},q.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:q.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=q.iteratee(b,c),q.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},q.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:q.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=q.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},q.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=q.values(a)),a[q.random(a.length-1)]):q.shuffle(a).slice(0,Math.max(0,b))},q.sortBy=function(a,b,c){return b=q.iteratee(b,c),q.pluck(q.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var t=function(a){return function(b,c,d){var e={};return c=q.iteratee(c,d),q.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};q.groupBy=t(function(a,b,c){q.has(a,c)?a[c].push(b):a[c]=[b]}),q.indexBy=t(function(a,b,c){a[c]=b}),q.countBy=t(function(a,b,c){q.has(a,c)?a[c]++:a[c]=1}),q.sortedIndex=function(a,b,c,d){c=q.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},q.toArray=function(a){return a?q.isArray(a)?j.call(a):a.length===+a.length?q.map(a,q.identity):q.values(a):[]},q.size=function(a){return null==a?0:a.length===+a.length?a.length:q.keys(a).length},q.partition=function(a,b,c){b=q.iteratee(b,c);var d=[],e=[];return q.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},q.first=q.head=q.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:j.call(a,0,b)},q.initial=function(a,b,c){return j.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},q.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},q.rest=q.tail=q.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},q.compact=function(a){return q.filter(a,q.identity)};var u=function(a,b,c,d){if(b&&q.every(a,q.isArray))return k.apply(d,a);for(var e=0,f=a.length;f>e;e++){var g=a[e];q.isArray(g)||q.isArguments(g)?b?i.apply(d,g):u(g,b,c,d):c||d.push(g)}return d};q.flatten=function(a,b){return u(a,b,!1,[])},q.without=function(a){return q.difference(a,j.call(arguments,1))},q.uniq=q.unique=function(a,b,c,d){if(null==a)return[];q.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=q.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);q.indexOf(f,j)<0&&(f.push(j),e.push(i))}else q.indexOf(e,i)<0&&e.push(i)}return e},q.union=function(){return q.uniq(u(arguments,!0,!0,[]))},q.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!q.contains(b,f)){for(var g=1;c>g&&q.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},q.difference=function(a){var b=u(j.call(arguments,1),!0,!0,[]);return q.filter(a,function(a){return!q.contains(b,a)})},q.zip=function(a){if(null==a)return[];for(var b=q.max(arguments,"length").length,c=Array(b),d=0;b>d;d++)c[d]=q.pluck(arguments,d);return c},q.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},q.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=q.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},q.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},q.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var v=function(){};q.bind=function(a,b){var c,d;if(p&&a.bind===p)return p.apply(a,j.call(arguments,1));if(!q.isFunction(a))throw new TypeError("Bind must be called on a function");return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));v.prototype=a.prototype;var e=new v;v.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return q.isObject(f)?f:e}},q.partial=function(a){var b=j.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===q&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},q.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=q.bind(a[c],a);return a},q.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return q.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},q.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},q.defer=function(a){return q.delay.apply(q,[a,1].concat(j.call(arguments,1)))},q.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:q.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=q.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},q.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=q.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=q.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},q.wrap=function(a,b){return q.partial(b,a)},q.negate=function(a){return function(){return!a.apply(this,arguments)}},q.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},q.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},q.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},q.once=q.partial(q.before,2),q.keys=function(a){if(!q.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)q.has(a,c)&&b.push(c);return b},q.values=function(a){for(var b=q.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},q.pairs=function(a){for(var b=q.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},q.invert=function(a){for(var b={},c=q.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},q.functions=q.methods=function(a){var b=[];for(var c in a)q.isFunction(a[c])&&b.push(c);return b.sort()},q.extend=function(a){if(!q.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)m.call(b,c)&&(a[c]=b[c])}return a},q.pick=function(a,b,c){var d,e={};if(null==a)return e;if(q.isFunction(b)){b=r(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var g=k.apply([],j.call(arguments,1));a=new Object(a);for(var h=0,i=g.length;i>h;h++)d=g[h],d in a&&(e[d]=a[d])}return e},q.omit=function(a,b,c){if(q.isFunction(b))b=q.negate(b);else{var d=q.map(k.apply([],j.call(arguments,1)),String);b=function(a,b){return!q.contains(d,b)}}return q.pick(a,b,c)},q.defaults=function(a){if(!q.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},q.clone=function(a){return q.isObject(a)?q.isArray(a)?a.slice():q.extend({},a):a},q.tap=function(a,b){return b(a),a};var w=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof q&&(a=a._wrapped),b instanceof q&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(q.isFunction(g)&&g instanceof g&&q.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i,j;if("[object Array]"===e){if(i=a.length,j=i===b.length)for(;i--&&(j=w(a[i],b[i],c,d)););}else{var k,m=q.keys(a);if(i=m.length,j=q.keys(b).length===i)for(;i--&&(k=m[i],j=q.has(b,k)&&w(a[k],b[k],c,d)););}return c.pop(),d.pop(),j};q.isEqual=function(a,b){return w(a,b,[],[])},q.isEmpty=function(a){if(null==a)return!0;if(q.isArray(a)||q.isString(a)||q.isArguments(a))return 0===a.length;for(var b in a)if(q.has(a,b))return!1;return!0},q.isElement=function(a){return!(!a||1!==a.nodeType)},q.isArray=n||function(a){return"[object Array]"===l.call(a)},q.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},q.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){q["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),q.isArguments(arguments)||(q.isArguments=function(a){return q.has(a,"callee")}),"function"!=typeof/./&&(q.isFunction=function(a){return"function"==typeof a||!1}),q.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},q.isNaN=function(a){return q.isNumber(a)&&a!==+a},q.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},q.isNull=function(a){return null===a},q.isUndefined=function(a){return void 0===a},q.has=function(a,b){return null!=a&&m.call(a,b)},q.noConflict=function(){return b._=e,this
},q.identity=function(a){return a},q.constant=function(a){return function(){return a}},q.noop=function(){},q.property=function(a){return function(b){return b[a]}},q.matches=function(a){var b=q.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},q.times=function(a,b,c){var d=Array(Math.max(0,a));b=r(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},q.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},q.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},y=q.invert(x),z=function(a){var b=function(b){return a[b]},c="(?:"+q.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};q.escape=z(x),q.unescape=z(y),q.result=function(a,b){if(null==a)return void 0;var c=a[b];return q.isFunction(c)?a[b]():c};var A=0;q.uniqueId=function(a){var b=++A+"";return a?a+b:b},q.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,E=function(a){return"\\"+C[a]};q.template=function(a,b,c){!b&&c&&(b=c),b=q.defaults({},b,q.templateSettings);var d=RegExp([(b.escape||B).source,(b.interpolate||B).source,(b.evaluate||B).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(D,E),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,q)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},q.chain=function(a){var b=q(a);return b._chain=!0,b};var F=function(a){return this._chain?q(a).chain():a};q.mixin=function(a){q.each(q.functions(a),function(b){var c=q[b]=a[b];q.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),F.call(this,c.apply(q,a))}})},q.mixin(q),q.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];q.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],F.call(this,c)}}),q.each(["concat","join","slice"],function(a){var b=f[a];q.prototype[a]=function(){return F.call(this,b.apply(this._wrapped,arguments))}}),q.prototype.value=function(){return this._wrapped},"function"==typeof a&&a.amd&&a("underscore",[],function(){return q})}).call(this)},{}],13:[function(a,b){b.exports={name:"joist",version:"0.5.1",description:"A light workflow to reuse and separate logic pieces independently of input and output sources.",keywords:["joist","multimedia"],main:"index.js",scripts:{test:'echo "Error: no test specified" && exit 1'},author:"Sebastian Kannegiesser <s_schlender@hotmail.com>",license:"MIT",repository:{type:"git",url:"git://github.com/bitterulf/joist"},dependencies:{underscore:"^1.7.0","deep-diff":"^0.2.0","underscore.string":"^2.3.3"},devDependencies:{grunt:"^0.4.5","grunt-browserify":"^3.0.1","grunt-contrib-uglify":"^0.6.0","grunt-contrib-clean":"^0.6.0"}}},{}]},{},[5])(5)});
